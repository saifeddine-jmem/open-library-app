<div class="min-h-screen">
  <!-- Header -->
  <app-head-bar></app-head-bar>

  <!-- Main Content -->
  <main class="pt-24 pb-16">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="container mx-auto px-6">
      <div class="flex items-center justify-center py-20">
        <div class="text-center">
          <div class="text-6xl mb-4 animate-spin-slow float-animation drop-shadow-[0_0_20px_rgba(59,130,246,0.6)]">üìö</div>
          <p class="text-slate-400 animate-pulse">Loading book details...</p>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !isLoading" class="container mx-auto px-6">
      <div class="text-center py-20">
        <p class="text-2xl text-red-400 mb-4">üòû Failed to load book details</p>
        <button (click)="goBack()" class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
          ‚Üê Back to Home
        </button>
      </div>
    </div>

    <!-- Book Details -->
    <div *ngIf="book && !isLoading" class="container mx-auto px-6">
      <!-- Back Button -->
      <button (click)="goBack()" class="mb-8 flex items-center gap-2 text-slate-300 hover:text-blue-400 transition duration-300">
        <span>‚Üê</span> Back to Results
      </button>

      <!-- Book Info Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Book Cover -->
        <div class="lg:col-span-1">
          <div class="glass rounded-2xl p-6 sticky top-24 glow-card">
            <div class="relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-800 to-slate-900 aspect-[3/4] mb-6 group">
              <img
                [src]="getCoverUrl()"
                [alt]="book.title"
                class="w-full h-full object-cover"
              />
            </div>
            
            <!-- Quick Stats -->
            <div class="space-y-4">
              <div class="flex items-center justify-between text-sm">
                <span class="text-slate-400">First Published</span>
                <span class="text-white font-semibold">{{ publicationDate }}</span>
              </div>
              <div *ngIf="book.number_of_pages" class="flex items-center justify-between text-sm">
                <span class="text-slate-400">Pages</span>
                <span class="text-white font-semibold">{{ book.number_of_pages }}</span>
              </div>
              <div *ngIf="book.isbn_13 && book.isbn_13.length > 0" class="flex items-center justify-between text-sm">
                <span class="text-slate-400">ISBN-13</span>
                <span class="text-white font-semibold font-mono text-xs">{{ book.isbn_13[0] }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Book Information -->
        <div class="lg:col-span-2">
          <div class="glass rounded-2xl p-8 glow-card gradient-border">
            <!-- Title -->
            <h1 class="text-4xl font-bold text-white mb-3 pb-4 relative top-border-line">{{ book.title }}</h1>
            <p *ngIf="book.subtitle" class="text-xl text-slate-300 mb-6">{{ book.subtitle }}</p>

            <!-- Authors -->
            <div class="mb-8 pb-4 relative border-b border-slate-700" *ngIf="authorNames.length > 0">
              <h3 class="text-sm font-semibold text-slate-400 mb-2">Authors</h3>
              <div class="flex flex-wrap gap-2">
                <span *ngFor="let author of authorNames" class="px-4 py-2 bg-blue-500/20 border border-blue-500/30 text-blue-300 rounded-lg text-sm left-accent-line">
                  {{ author }}
                </span>
              </div>
            </div>

            <!-- Description -->
            <div class="mb-8 pb-4 relative border-b border-slate-700/50">
              <h3 class="text-sm font-semibold text-slate-400 mb-3">Description</h3>
              <p class="text-slate-300 leading-relaxed whitespace-pre-line">{{ getDescription() }}</p>
              <div class="line-horizontal absolute bottom-0 left-0 right-0" style="animation-delay: 0.8s"></div>
            </div>

            <!-- Topics -->
            <div *ngIf="book.subjects && book.subjects.length > 0" class="mb-8">
              <h3 class="text-sm font-semibold text-slate-400 mb-3">Topics</h3>
              <div class="flex flex-wrap gap-2">
                <span *ngFor="let subject of book.subjects.slice(0, 10)" class="px-3 py-1 bg-slate-700/50 border border-slate-600 text-slate-300 rounded text-xs">
                  {{ subject }}
                </span>
              </div>
            </div>

            <!-- Additional Info -->
            <div class="border-t border-slate-700 pt-6">
              <h3 class="text-sm font-semibold text-slate-400 mb-3">Additional Information</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="text-slate-400">First Publish Date:</span>
                  <span class="text-white ml-2">{{ publicationDate }}</span>
                </div>
                <div>
                  <span class="text-slate-400">Book ID:</span>
                  <span class="text-white ml-2 font-mono text-xs">{{ book.key }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
